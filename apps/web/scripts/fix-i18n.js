const fs = require('fs');
const path = require('path');

const messagesDir = path.join(__dirname, '..', 'messages');

// Translations to add to common.unauthorized
const unauthorizedTranslations = {
  en: {
    title: "Access Denied",
    description: "You don't have permission to access this page.",
    loggedAs: "Logged in as:",
    role: "Role:",
    goBack: "Go back",
    goToDashboard: "Go to Dashboard",
    logout: "Logout"
  },
  pt: {
    title: "Acesso Negado",
    description: "Você não tem permissão para acessar esta página.",
    loggedAs: "Conectado como:",
    role: "Função:",
    goBack: "Voltar",
    goToDashboard: "Ir para Dashboard",
    logout: "Sair"
  },
  fr: {
    title: "Accès refusé",
    description: "Vous n'avez pas la permission d'accéder à cette page.",
    loggedAs: "Connecté en tant que :",
    role: "Rôle :",
    goBack: "Retour",
    goToDashboard: "Aller au tableau de bord",
    logout: "Déconnexion"
  },
  tr: {
    title: "Erişim Reddedildi",
    description: "Bu sayfaya erişim izniniz yok.",
    loggedAs: "Giriş yapan:",
    role: "Rol:",
    goBack: "Geri dön",
    goToDashboard: "Panele git",
    logout: "Çıkış"
  }
};

// Translations for school namespace sub-objects
const schoolTranslations = {
  en: {
    // Nav label keys (replacing old bare keys)
    classesNav: "Classes",
    analyticsNav: "Analytics",
    reportsNav: "Reports",
    settingsNav: "Settings",
    curriculumTracksNav: "Curriculum Tracks",
    parentsNav: "Parents",
    // Sub-objects
    analytics: {
      title: "Analytics & Statistics",
      comingSoonDesc: "We're working on this feature. Soon you'll be able to view detailed statistics about the school's performance.",
      comingSoon: "Coming Soon"
    },
    classes: {
      title: "Class Management",
      subtitle: "Manage and view all school classes",
      created: "Class created successfully!",
      confirmDelete: "Are you sure you want to delete this class?",
      deleted: "Class deleted successfully!",
      totalClasses: "Total Classes",
      searchPlaceholder: "Search by class name...",
      newClass: "New Class",
      className: "Class Name",
      classNamePlaceholder: "e.g., 10th A",
      academicYear: "Academic Year",
      gradeLevel: "Grade/Year",
      maxCapacity: "Maximum Capacity",
      export: "Export",
      noClassesFound: "No classes found.",
      capacity: "Capacity",
      viewDetails: "View Details",
      showing: "Showing",
      to: "to",
      of: "of",
      classesLabel: "classes",
      page: "Page",
      cancel: "Cancel",
      createClass: "Create Class",
      errorLoading: "Error loading classes. Please try again."
    },
    parents: {
      title: "Parents Management",
      subtitle: "Create parents independently and link students.",
      created: "Parent created successfully",
      studentLinked: "Student linked successfully",
      studentUnlinked: "Student unlinked successfully",
      newParent: "New Parent",
      firstName: "First Name",
      firstNamePlaceholder: "e.g., John",
      lastName: "Last Name",
      lastNamePlaceholder: "e.g., Smith",
      email: "Email",
      emailPlaceholder: "john@example.com",
      phone: "Phone",
      phonePlaceholder: "+258...",
      manage: "Manage:",
      linkedStudents: "Linked Students",
      searchStudentPlaceholder: "Search student by name...",
      noParentsFound: "No parents found.",
      noPhone: "No phone",
      parent: "Parent",
      studentsCount: "Student(s)",
      manageLinks: "Manage Links",
      create: "Create",
      loading: "Loading...",
      noLinkedStudents: "No linked students.",
      addNewLink: "Add New Link",
      searching: "Searching...",
      noStudentFound: "No student found.",
      noClass: "No class"
    },
    settings: {
      title: "Settings",
      subtitle: "Manage school and system settings",
      schoolLogoAlt: "School Logo",
      uploading: "Uploading...",
      uploadLogo: "Upload Logo",
      logoHint: "PNG, JPG up to 2MB",
      schoolName: "School Name",
      schoolCode: "School Code",
      schoolType: "School Type",
      principal: "Principal",
      emailLabel: "Email",
      emailPlaceholder: "School email",
      phoneLabel: "Phone",
      phonePlaceholder: "School phone",
      address: "Address",
      city: "City",
      province: "Province",
      website: "Website",
      websitePlaceholder: "School website",
      primary: "Primary",
      primaryComplete: "Primary Complete",
      secondary: "Secondary",
      secondaryComplete: "Secondary Complete",
      manageUsers: "Manage users with access to the admin panel",
      addUser: "Add User",
      userColumn: "User",
      roleColumn: "Role",
      statusColumn: "Status",
      lastAccessColumn: "Last Access",
      actionsColumn: "Actions",
      activeStatus: "Active",
      loadingUsers: "Loading...",
      noUsersFound: "No users found.",
      addUserTitle: "Add User",
      firstNameLabel: "First Name",
      firstNamePlaceholder: "First Name",
      lastNameLabel: "Last Name",
      lastNamePlaceholder: "Last Name",
      userEmailPlaceholder: "email@school.edu.mz",
      userPhoneLabel: "Phone",
      userPhonePlaceholder: "+258 84 123 4567",
      initialPassword: "Initial Password",
      roleLabel: "Role",
      roleAdmin: "Administrator",
      roleCoordinator: "Pedagogic Coordinator",
      roleTeacher: "Teacher",
      roleAccountant: "Accountant",
      roleLibrarian: "Librarian",
      cancel: "Cancel",
      adding: "Adding...",
      add: "Add",
      logoUpdated: "Logo updated successfully!",
      userAdded: "User added successfully!",
      academicYearTitle: "Academic Year",
      currentYear: "Current Year",
      semesterTrimester: "Semester/Trimester",
      semester1: "1st Semester",
      semester2: "2nd Semester",
      operatingHours: "Operating Hours",
      startTime: "Start",
      endTime: "End",
      classDuration: "Class Duration (min)",
      breakInterval: "Break (min)",
      gradingSystem: "Grading System",
      gradingScale: "Grading Scale",
      passingGrade: "Minimum Passing Grade",
      attendanceSection: "Attendance",
      attendanceThreshold: "Minimum Attendance Threshold (%)",
      attendanceHint: "Students with attendance below this threshold will be flagged",
      notificationsDesc: "Configure how and when to receive system notifications",
      passwordPolicies: "Password Policies",
      minLength: "Minimum length",
      requireSpecialChars: "Require special characters",
      requireNumbers: "Require numbers",
      requireUpperLower: "Require uppercase and lowercase",
      sessionsAccess: "Sessions & Access",
      sessionTimeout: "Session timeout (minutes)",
      twoFactorAuth: "Two-factor authentication",
      lockAfterFailedAttempts: "Lock after failed attempts",
      dangerZone: "Danger Zone",
      dangerZoneDesc: "These actions are irreversible. Be careful.",
      resetAllPasswords: "Reset All Passwords",
      terminateAllSessions: "End All Sessions",
      interfaceTheme: "Interface Theme",
      light: "Light",
      dark: "Dark",
      automatic: "Automatic",
      primaryColor: "Primary Color",
      language: "Language",
      portugueseMoz: "Portuguese (Mozambique)",
      portuguesePt: "Portuguese (Portugal)",
      english: "English",
      connectMozedu: "Connect MozEdu with other services and systems",
      sigeNacional: "National SIGE",
      sigeDesc: "Integrated School Management System",
      mpesa: "M-Pesa",
      mpesaDesc: "Mobile payments",
      googleWorkspace: "Google Workspace",
      googleDesc: "Email and collaboration",
      smsGateway: "SMS Gateway",
      smsDesc: "SMS messaging",
      backupCloud: "Backup Cloud",
      backupDesc: "Automatic cloud backup",
      configure: "Configure",
      connect: "Connect",
      unsavedChanges: "Unsaved changes",
      discard: "Discard",
      saveChanges: "Save Changes",
      profileSection: "School Profile",
      countrySection: "Country & Curriculum",
      usersSection: "Users",
      academicSection: "Academic",
      gradingSection: "Grading System",
      communicationsSection: "Communications",
      notificationsSection: "Notifications",
      securitySection: "Security",
      appearanceSection: "Appearance",
      integrationsSection: "Integrations",
      loadingGrading: "Loading grading system settings...",
      attendanceAlerts: "Attendance Alerts by Email",
      attendanceAlertsDesc: "Receive notifications when students are absent",
      gradesPublished: "Grades Published",
      gradesPublishedDesc: "Notify when new grades are posted",
      schoolEvents: "School Events",
      schoolEventsDesc: "Alerts about events and activities",
      urgentSms: "Urgent SMS",
      urgentSmsDesc: "SMS messages for urgent communications",
      pushNotifications: "Push Notifications",
      pushNotificationsDesc: "In-app notifications",
      weeklyReport: "Weekly Report",
      weeklyReportDesc: "Weekly summary by email"
    },
    reports: {
      title: "School Analytics & Reports",
      subtitle: "Overview of school performance and metrics",
      totalStudents: "Total Students",
      totalTeachers: "Total Teachers",
      avgAttendance: "Avg Attendance",
      avgGpa: "Avg GPA",
      recentActivity: "Recent Activity",
      noActivity: "No recent activity",
      financialOverview: "Financial Overview",
      totalRevenue: "Total Revenue",
      pendingPayments: "Pending Payments"
    },
    curriculumTracks: {
      title: "Curriculum Tracks",
      subtitle: "Manage multi-curriculum tracks for your school",
      addTrack: "Add Track",
      totalTracks: "Total Tracks",
      active: "Active",
      combined: "Combined",
      default: "Default",
      searchPlaceholder: "Search tracks...",
      nameColumn: "Name",
      typeColumn: "Type",
      scheduleColumn: "Schedule",
      statusColumn: "Status",
      flagsColumn: "Flags",
      actionsColumn: "Actions",
      noTracksFound: "No curriculum tracks found",
      edit: "Edit",
      delete: "Delete",
      editTrack: "Edit Curriculum Track",
      createTrack: "Create Curriculum Track",
      nameLabel: "Name *",
      namePlaceholder: "e.g., National Track",
      curriculumTypeLabel: "Curriculum Type *",
      description: "Description",
      descriptionPlaceholder: "Optional description",
      combinedCurriculum: "Combined Curriculum",
      defaultTrack: "Default Track",
      combinedSettings: "Combined Curriculum Settings",
      additionalCurriculums: "Additional Curriculums",
      ratio: "Ratio (e.g., 70-30)",
      scheduleConfig: "Schedule Configuration",
      periodsPerDay: "Periods/Day",
      periodMin: "Period (min)",
      breakMin: "Break (min)",
      lunchMin: "Lunch (min)",
      schoolDays: "School Days",
      cancel: "Cancel",
      update: "Update",
      create: "Create",
      inactive: "Inactive",
      periods: "periods",
      daysWeek: "days/week",
      trackUpdated: "Curriculum track updated",
      trackCreated: "Curriculum track created",
      trackDeleted: "Curriculum track deleted",
      confirmDelete: "Are you sure you want to delete \"{name}\"?",
      nameRequired: "Name is required",
      failedToSave: "Failed to save curriculum track",
      failedToDelete: "Failed to delete track",
      failedToLoad: "Failed to load curriculum tracks"
    }
  },
  pt: {
    classesNav: "Turmas",
    analyticsNav: "Análises",
    reportsNav: "Relatórios",
    settingsNav: "Configurações",
    curriculumTracksNav: "Percursos Curriculares",
    parentsNav: "Encarregados",
    analytics: {
      title: "Análises e Estatísticas",
      comingSoonDesc: "Estamos a trabalhar nesta funcionalidade. Em breve poderá visualizar estatísticas detalhadas sobre o desempenho da escola.",
      comingSoon: "Em Breve"
    },
    classes: {
      title: "Gestão de Turmas",
      subtitle: "Gerir e visualizar todas as turmas da escola",
      created: "Turma criada com sucesso!",
      confirmDelete: "Tem certeza que deseja excluir esta turma?",
      deleted: "Turma excluída com sucesso!",
      totalClasses: "Total de Turmas",
      searchPlaceholder: "Pesquisar por nome da turma...",
      newClass: "Nova Turma",
      className: "Nome da Turma",
      classNamePlaceholder: "Ex: 10ª A",
      academicYear: "Ano Letivo",
      gradeLevel: "Classe/Ano",
      maxCapacity: "Capacidade Máxima",
      export: "Exportar",
      noClassesFound: "Nenhuma turma encontrada.",
      capacity: "Capacidade",
      viewDetails: "Ver Detalhes",
      showing: "Mostrando",
      to: "a",
      of: "de",
      classesLabel: "turmas",
      page: "Página",
      cancel: "Cancelar",
      createClass: "Criar Turma",
      errorLoading: "Erro ao carregar turmas. Por favor, tente novamente."
    },
    parents: {
      title: "Gestão de Encarregados",
      subtitle: "Crie encarregados independentemente e vincule alunos.",
      created: "Encarregado criado com sucesso",
      studentLinked: "Aluno vinculado com sucesso",
      studentUnlinked: "Aluno desvinculado com sucesso",
      newParent: "Novo Encarregado",
      firstName: "Nome",
      firstNamePlaceholder: "Ex: João",
      lastName: "Sobrenome",
      lastNamePlaceholder: "Ex: Silva",
      email: "Email",
      emailPlaceholder: "joao@exemplo.com",
      phone: "Telefone",
      phonePlaceholder: "+258...",
      manage: "Gerenciar:",
      linkedStudents: "Alunos Vinculados",
      searchStudentPlaceholder: "Buscar aluno por nome...",
      noParentsFound: "Nenhum encarregado encontrado.",
      noPhone: "Sem telefone",
      parent: "Encarregado",
      studentsCount: "Aluno(s)",
      manageLinks: "Gerenciar Vínculos",
      create: "Criar",
      loading: "Carregando...",
      noLinkedStudents: "Nenhum aluno vinculado.",
      addNewLink: "Adicionar Novo Vínculo",
      searching: "Buscando...",
      noStudentFound: "Nenhum aluno encontrado.",
      noClass: "Sem turma"
    },
    settings: {
      title: "Configurações",
      subtitle: "Gerir configurações da escola e do sistema",
      schoolLogoAlt: "Logo da Escola",
      uploading: "A carregar...",
      uploadLogo: "Carregar Logo",
      logoHint: "PNG, JPG até 2MB",
      schoolName: "Nome da Escola",
      schoolCode: "Código da Escola",
      schoolType: "Tipo de Escola",
      principal: "Director",
      emailLabel: "Email",
      emailPlaceholder: "Email da escola",
      phoneLabel: "Telefone",
      phonePlaceholder: "Telefone da escola",
      address: "Endereço",
      city: "Cidade",
      province: "Província",
      website: "Website",
      websitePlaceholder: "Website da escola",
      primary: "Primária",
      primaryComplete: "Primária Completa",
      secondary: "Secundária",
      secondaryComplete: "Secundária Completa",
      manageUsers: "Gerir utilizadores com acesso ao painel administrativo",
      addUser: "Adicionar Utilizador",
      userColumn: "Utilizador",
      roleColumn: "Função",
      statusColumn: "Estado",
      lastAccessColumn: "Último Acesso",
      actionsColumn: "Acções",
      activeStatus: "Activo",
      loadingUsers: "A carregar...",
      noUsersFound: "Nenhum utilizador encontrado.",
      addUserTitle: "Adicionar Utilizador",
      firstNameLabel: "Nome",
      firstNamePlaceholder: "Primeiro Nome",
      lastNameLabel: "Apelido",
      lastNamePlaceholder: "Apelido",
      userEmailPlaceholder: "email@escola.edu.mz",
      userPhoneLabel: "Telefone",
      userPhonePlaceholder: "+258 84 123 4567",
      initialPassword: "Senha Inicial",
      roleLabel: "Função",
      roleAdmin: "Administrador",
      roleCoordinator: "Coordenador Pedagógico",
      roleTeacher: "Professor",
      roleAccountant: "Contabilista",
      roleLibrarian: "Bibliotecário",
      cancel: "Cancelar",
      adding: "Adicionando...",
      add: "Adicionar",
      logoUpdated: "Logo atualizada com sucesso!",
      userAdded: "Utilizador adicionado com sucesso!",
      academicYearTitle: "Ano Lectivo",
      currentYear: "Ano Actual",
      semesterTrimester: "Semestre/Trimestre",
      semester1: "1º Semestre",
      semester2: "2º Semestre",
      operatingHours: "Horário de Funcionamento",
      startTime: "Início",
      endTime: "Fim",
      classDuration: "Duração Aula (min)",
      breakInterval: "Intervalo (min)",
      gradingSystem: "Sistema de Avaliação",
      gradingScale: "Escala de Notas",
      passingGrade: "Nota Mínima de Aprovação",
      attendanceSection: "Presença",
      attendanceThreshold: "Limite Mínimo de Presença (%)",
      attendanceHint: "Alunos com presença abaixo deste limite serão sinalizados",
      notificationsDesc: "Configure como e quando receber notificações do sistema",
      passwordPolicies: "Políticas de Senha",
      minLength: "Comprimento mínimo",
      requireSpecialChars: "Exigir caracteres especiais",
      requireNumbers: "Exigir números",
      requireUpperLower: "Exigir maiúsculas e minúsculas",
      sessionsAccess: "Sessões e Acesso",
      sessionTimeout: "Tempo limite de sessão (minutos)",
      twoFactorAuth: "Autenticação de dois factores",
      lockAfterFailedAttempts: "Bloquear após tentativas falhadas",
      dangerZone: "Zona de Perigo",
      dangerZoneDesc: "Estas acções são irreversíveis. Tenha cuidado.",
      resetAllPasswords: "Repor Todas as Senhas",
      terminateAllSessions: "Terminar Todas as Sessões",
      interfaceTheme: "Tema da Interface",
      light: "Claro",
      dark: "Escuro",
      automatic: "Automático",
      primaryColor: "Cor Principal",
      language: "Idioma",
      portugueseMoz: "Português (Moçambique)",
      portuguesePt: "Português (Portugal)",
      english: "English",
      connectMozedu: "Conecte o MozEdu com outros serviços e sistemas",
      sigeNacional: "SIGE Nacional",
      sigeDesc: "Sistema Integrado de Gestão Escolar",
      mpesa: "M-Pesa",
      mpesaDesc: "Pagamentos móveis",
      googleWorkspace: "Google Workspace",
      googleDesc: "Email e colaboração",
      smsGateway: "SMS Gateway",
      smsDesc: "Envio de mensagens SMS",
      backupCloud: "Backup Cloud",
      backupDesc: "Backup automático na nuvem",
      configure: "Configurar",
      connect: "Conectar",
      unsavedChanges: "Alterações não guardadas",
      discard: "Descartar",
      saveChanges: "Guardar Alterações",
      profileSection: "Perfil da Escola",
      countrySection: "País e Currículo",
      usersSection: "Utilizadores",
      academicSection: "Académico",
      gradingSection: "Sistema de Notas",
      communicationsSection: "Comunicações",
      notificationsSection: "Notificações",
      securitySection: "Segurança",
      appearanceSection: "Aparência",
      integrationsSection: "Integrações",
      loadingGrading: "Carregando configurações do sistema de notas...",
      attendanceAlerts: "Alertas de Faltas por Email",
      attendanceAlertsDesc: "Receber notificações quando alunos faltam",
      gradesPublished: "Notas Publicadas",
      gradesPublishedDesc: "Notificar quando novas notas são lançadas",
      schoolEvents: "Eventos Escolares",
      schoolEventsDesc: "Alertas sobre eventos e actividades",
      urgentSms: "SMS Urgentes",
      urgentSmsDesc: "Mensagens SMS para comunicações urgentes",
      pushNotifications: "Notificações Push",
      pushNotificationsDesc: "Notificações na aplicação",
      weeklyReport: "Relatório Semanal",
      weeklyReportDesc: "Resumo semanal por email"
    },
    reports: {
      title: "Análises e Relatórios Escolares",
      subtitle: "Visão geral do desempenho e métricas da escola",
      totalStudents: "Total de Alunos",
      totalTeachers: "Total de Professores",
      avgAttendance: "Média de Presença",
      avgGpa: "Média Geral",
      recentActivity: "Atividade Recente",
      noActivity: "Sem atividade recente",
      financialOverview: "Resumo Financeiro",
      totalRevenue: "Receita Total",
      pendingPayments: "Pagamentos Pendentes"
    },
    curriculumTracks: {
      title: "Percursos Curriculares",
      subtitle: "Gerir percursos multi-curriculares da escola",
      addTrack: "Adicionar Percurso",
      totalTracks: "Total de Percursos",
      active: "Activos",
      combined: "Combinados",
      default: "Padrão",
      searchPlaceholder: "Pesquisar percursos...",
      nameColumn: "Nome",
      typeColumn: "Tipo",
      scheduleColumn: "Horário",
      statusColumn: "Estado",
      flagsColumn: "Flags",
      actionsColumn: "Acções",
      noTracksFound: "Nenhum percurso curricular encontrado",
      edit: "Editar",
      delete: "Eliminar",
      editTrack: "Editar Percurso Curricular",
      createTrack: "Criar Percurso Curricular",
      nameLabel: "Nome *",
      namePlaceholder: "Ex: Percurso Nacional",
      curriculumTypeLabel: "Tipo de Currículo *",
      description: "Descrição",
      descriptionPlaceholder: "Descrição opcional",
      combinedCurriculum: "Currículo Combinado",
      defaultTrack: "Percurso Padrão",
      combinedSettings: "Configurações de Currículo Combinado",
      additionalCurriculums: "Currículos Adicionais",
      ratio: "Proporção (ex: 70-30)",
      scheduleConfig: "Configuração de Horário",
      periodsPerDay: "Aulas/Dia",
      periodMin: "Aula (min)",
      breakMin: "Intervalo (min)",
      lunchMin: "Almoço (min)",
      schoolDays: "Dias de Aula",
      cancel: "Cancelar",
      update: "Atualizar",
      create: "Criar",
      inactive: "Inactivo",
      periods: "aulas",
      daysWeek: "dias/semana",
      trackUpdated: "Percurso curricular atualizado",
      trackCreated: "Percurso curricular criado",
      trackDeleted: "Percurso curricular eliminado",
      confirmDelete: "Tem certeza que deseja eliminar \"{name}\"?",
      nameRequired: "Nome é obrigatório",
      failedToSave: "Falha ao guardar percurso curricular",
      failedToDelete: "Falha ao eliminar percurso",
      failedToLoad: "Falha ao carregar percursos curriculares"
    }
  },
  fr: {
    classesNav: "Classes",
    analyticsNav: "Analyses",
    reportsNav: "Rapports",
    settingsNav: "Paramètres",
    curriculumTracksNav: "Parcours Curriculaires",
    parentsNav: "Parents",
    analytics: {
      title: "Analyses et Statistiques",
      comingSoonDesc: "Nous travaillons sur cette fonctionnalité. Bientôt, vous pourrez visualiser des statistiques détaillées sur les performances de l'école.",
      comingSoon: "Bientôt disponible"
    },
    classes: {
      title: "Gestion des Classes",
      subtitle: "Gérer et visualiser toutes les classes de l'école",
      created: "Classe créée avec succès !",
      confirmDelete: "Êtes-vous sûr de vouloir supprimer cette classe ?",
      deleted: "Classe supprimée avec succès !",
      totalClasses: "Total des Classes",
      searchPlaceholder: "Rechercher par nom de classe...",
      newClass: "Nouvelle Classe",
      className: "Nom de la Classe",
      classNamePlaceholder: "Ex : 10ème A",
      academicYear: "Année Scolaire",
      gradeLevel: "Niveau/Année",
      maxCapacity: "Capacité Maximale",
      export: "Exporter",
      noClassesFound: "Aucune classe trouvée.",
      capacity: "Capacité",
      viewDetails: "Voir Détails",
      showing: "Affichage de",
      to: "à",
      of: "sur",
      classesLabel: "classes",
      page: "Page",
      cancel: "Annuler",
      createClass: "Créer Classe",
      errorLoading: "Erreur lors du chargement des classes. Veuillez réessayer."
    },
    parents: {
      title: "Gestion des Parents",
      subtitle: "Créez des parents indépendamment et liez des élèves.",
      created: "Parent créé avec succès",
      studentLinked: "Élève lié avec succès",
      studentUnlinked: "Élève délié avec succès",
      newParent: "Nouveau Parent",
      firstName: "Prénom",
      firstNamePlaceholder: "Ex : Jean",
      lastName: "Nom de famille",
      lastNamePlaceholder: "Ex : Dupont",
      email: "Email",
      emailPlaceholder: "jean@exemple.com",
      phone: "Téléphone",
      phonePlaceholder: "+258...",
      manage: "Gérer :",
      linkedStudents: "Élèves Liés",
      searchStudentPlaceholder: "Chercher un élève par nom...",
      noParentsFound: "Aucun parent trouvé.",
      noPhone: "Pas de téléphone",
      parent: "Parent",
      studentsCount: "Élève(s)",
      manageLinks: "Gérer les Liens",
      create: "Créer",
      loading: "Chargement...",
      noLinkedStudents: "Aucun élève lié.",
      addNewLink: "Ajouter un Nouveau Lien",
      searching: "Recherche...",
      noStudentFound: "Aucun élève trouvé.",
      noClass: "Pas de classe"
    },
    settings: {
      title: "Paramètres",
      subtitle: "Gérer les paramètres de l'école et du système",
      schoolLogoAlt: "Logo de l'école",
      uploading: "Téléchargement...",
      uploadLogo: "Télécharger le Logo",
      logoHint: "PNG, JPG jusqu'à 2 Mo",
      schoolName: "Nom de l'école",
      schoolCode: "Code de l'école",
      schoolType: "Type d'école",
      principal: "Directeur",
      emailLabel: "Email",
      emailPlaceholder: "Email de l'école",
      phoneLabel: "Téléphone",
      phonePlaceholder: "Téléphone de l'école",
      address: "Adresse",
      city: "Ville",
      province: "Province",
      website: "Site Web",
      websitePlaceholder: "Site web de l'école",
      primary: "Primaire",
      primaryComplete: "Primaire Complet",
      secondary: "Secondaire",
      secondaryComplete: "Secondaire Complet",
      manageUsers: "Gérer les utilisateurs ayant accès au panneau d'administration",
      addUser: "Ajouter un Utilisateur",
      userColumn: "Utilisateur",
      roleColumn: "Rôle",
      statusColumn: "État",
      lastAccessColumn: "Dernier Accès",
      actionsColumn: "Actions",
      activeStatus: "Actif",
      loadingUsers: "Chargement...",
      noUsersFound: "Aucun utilisateur trouvé.",
      addUserTitle: "Ajouter un Utilisateur",
      firstNameLabel: "Prénom",
      firstNamePlaceholder: "Prénom",
      lastNameLabel: "Nom de famille",
      lastNamePlaceholder: "Nom de famille",
      userEmailPlaceholder: "email@ecole.edu.mz",
      userPhoneLabel: "Téléphone",
      userPhonePlaceholder: "+258 84 123 4567",
      initialPassword: "Mot de passe initial",
      roleLabel: "Rôle",
      roleAdmin: "Administrateur",
      roleCoordinator: "Coordinateur Pédagogique",
      roleTeacher: "Professeur",
      roleAccountant: "Comptable",
      roleLibrarian: "Bibliothécaire",
      cancel: "Annuler",
      adding: "Ajout en cours...",
      add: "Ajouter",
      logoUpdated: "Logo mis à jour avec succès !",
      userAdded: "Utilisateur ajouté avec succès !",
      academicYearTitle: "Année Scolaire",
      currentYear: "Année Actuelle",
      semesterTrimester: "Semestre/Trimestre",
      semester1: "1er Semestre",
      semester2: "2ème Semestre",
      operatingHours: "Heures d'ouverture",
      startTime: "Début",
      endTime: "Fin",
      classDuration: "Durée du cours (min)",
      breakInterval: "Pause (min)",
      gradingSystem: "Système de Notation",
      gradingScale: "Échelle de Notes",
      passingGrade: "Note minimale de réussite",
      attendanceSection: "Présence",
      attendanceThreshold: "Seuil minimal de présence (%)",
      attendanceHint: "Les élèves en dessous de ce seuil seront signalés",
      notificationsDesc: "Configurez comment et quand recevoir les notifications du système",
      passwordPolicies: "Politiques de Mot de Passe",
      minLength: "Longueur minimale",
      requireSpecialChars: "Exiger des caractères spéciaux",
      requireNumbers: "Exiger des chiffres",
      requireUpperLower: "Exiger majuscules et minuscules",
      sessionsAccess: "Sessions et Accès",
      sessionTimeout: "Délai d'expiration de session (minutes)",
      twoFactorAuth: "Authentification à deux facteurs",
      lockAfterFailedAttempts: "Bloquer après tentatives échouées",
      dangerZone: "Zone de Danger",
      dangerZoneDesc: "Ces actions sont irréversibles. Soyez prudent.",
      resetAllPasswords: "Réinitialiser Tous les Mots de Passe",
      terminateAllSessions: "Mettre Fin à Toutes les Sessions",
      interfaceTheme: "Thème de l'interface",
      light: "Clair",
      dark: "Sombre",
      automatic: "Automatique",
      primaryColor: "Couleur Principale",
      language: "Langue",
      portugueseMoz: "Portugais (Mozambique)",
      portuguesePt: "Portugais (Portugal)",
      english: "English",
      connectMozedu: "Connectez MozEdu avec d'autres services et systèmes",
      sigeNacional: "SIGE National",
      sigeDesc: "Système Intégré de Gestion Scolaire",
      mpesa: "M-Pesa",
      mpesaDesc: "Paiements mobiles",
      googleWorkspace: "Google Workspace",
      googleDesc: "Email et collaboration",
      smsGateway: "SMS Gateway",
      smsDesc: "Messagerie SMS",
      backupCloud: "Backup Cloud",
      backupDesc: "Sauvegarde automatique dans le cloud",
      configure: "Configurer",
      connect: "Connecter",
      unsavedChanges: "Modifications non enregistrées",
      discard: "Annuler",
      saveChanges: "Enregistrer les Modifications",
      profileSection: "Profil de l'École",
      countrySection: "Pays et Curriculum",
      usersSection: "Utilisateurs",
      academicSection: "Académique",
      gradingSection: "Système de Notes",
      communicationsSection: "Communications",
      notificationsSection: "Notifications",
      securitySection: "Sécurité",
      appearanceSection: "Apparence",
      integrationsSection: "Intégrations",
      loadingGrading: "Chargement des paramètres du système de notation...",
      attendanceAlerts: "Alertes de Présence par Email",
      attendanceAlertsDesc: "Recevoir des notifications en cas d'absence",
      gradesPublished: "Notes Publiées",
      gradesPublishedDesc: "Notifier lors de la publication de nouvelles notes",
      schoolEvents: "Événements Scolaires",
      schoolEventsDesc: "Alertes sur les événements et activités",
      urgentSms: "SMS Urgents",
      urgentSmsDesc: "Messages SMS pour communications urgentes",
      pushNotifications: "Notifications Push",
      pushNotificationsDesc: "Notifications dans l'application",
      weeklyReport: "Rapport Hebdomadaire",
      weeklyReportDesc: "Résumé hebdomadaire par email"
    },
    reports: {
      title: "Analyses et Rapports Scolaires",
      subtitle: "Aperçu des performances et métriques de l'école",
      totalStudents: "Total des Élèves",
      totalTeachers: "Total des Enseignants",
      avgAttendance: "Présence Moyenne",
      avgGpa: "Moyenne Générale",
      recentActivity: "Activité Récente",
      noActivity: "Aucune activité récente",
      financialOverview: "Aperçu Financier",
      totalRevenue: "Revenus Totaux",
      pendingPayments: "Paiements en Attente"
    },
    curriculumTracks: {
      title: "Parcours Curriculaires",
      subtitle: "Gérer les parcours multi-curriculaires de l'école",
      addTrack: "Ajouter un Parcours",
      totalTracks: "Total des Parcours",
      active: "Actifs",
      combined: "Combinés",
      default: "Par défaut",
      searchPlaceholder: "Rechercher des parcours...",
      nameColumn: "Nom",
      typeColumn: "Type",
      scheduleColumn: "Horaire",
      statusColumn: "État",
      flagsColumn: "Drapeaux",
      actionsColumn: "Actions",
      noTracksFound: "Aucun parcours curriculaire trouvé",
      edit: "Modifier",
      delete: "Supprimer",
      editTrack: "Modifier le Parcours Curriculaire",
      createTrack: "Créer un Parcours Curriculaire",
      nameLabel: "Nom *",
      namePlaceholder: "Ex : Parcours National",
      curriculumTypeLabel: "Type de Curriculum *",
      description: "Description",
      descriptionPlaceholder: "Description optionnelle",
      combinedCurriculum: "Curriculum Combiné",
      defaultTrack: "Parcours Par Défaut",
      combinedSettings: "Paramètres du Curriculum Combiné",
      additionalCurriculums: "Curriculums Supplémentaires",
      ratio: "Ratio (ex : 70-30)",
      scheduleConfig: "Configuration de l'Horaire",
      periodsPerDay: "Cours/Jour",
      periodMin: "Cours (min)",
      breakMin: "Pause (min)",
      lunchMin: "Déjeuner (min)",
      schoolDays: "Jours de Cours",
      cancel: "Annuler",
      update: "Mettre à jour",
      create: "Créer",
      inactive: "Inactif",
      periods: "cours",
      daysWeek: "jours/semaine",
      trackUpdated: "Parcours curriculaire mis à jour",
      trackCreated: "Parcours curriculaire créé",
      trackDeleted: "Parcours curriculaire supprimé",
      confirmDelete: "Êtes-vous sûr de vouloir supprimer \"{name}\" ?",
      nameRequired: "Le nom est obligatoire",
      failedToSave: "Échec de l'enregistrement du parcours curriculaire",
      failedToDelete: "Échec de la suppression du parcours",
      failedToLoad: "Échec du chargement des parcours curriculaires"
    }
  },
  tr: {
    classesNav: "Sınıflar",
    analyticsNav: "Analizler",
    reportsNav: "Raporlar",
    settingsNav: "Ayarlar",
    curriculumTracksNav: "Müfredat Yolları",
    parentsNav: "Veliler",
    analytics: {
      title: "Analizler ve İstatistikler",
      comingSoonDesc: "Bu özellik üzerinde çalışıyoruz. Yakında okulun performansı hakkında detaylı istatistikleri görüntüleyebileceksiniz.",
      comingSoon: "Yakında"
    },
    classes: {
      title: "Sınıf Yönetimi",
      subtitle: "Tüm okul sınıflarını yönetin ve görüntüleyin",
      created: "Sınıf başarıyla oluşturuldu!",
      confirmDelete: "Bu sınıfı silmek istediğinizden emin misiniz?",
      deleted: "Sınıf başarıyla silindi!",
      totalClasses: "Toplam Sınıf",
      searchPlaceholder: "Sınıf adına göre ara...",
      newClass: "Yeni Sınıf",
      className: "Sınıf Adı",
      classNamePlaceholder: "Örn: 10-A",
      academicYear: "Akademik Yıl",
      gradeLevel: "Sınıf/Yıl",
      maxCapacity: "Maksimum Kapasite",
      export: "Dışa Aktar",
      noClassesFound: "Sınıf bulunamadı.",
      capacity: "Kapasite",
      viewDetails: "Detayları Gör",
      showing: "Gösteriliyor",
      to: "-",
      of: "/",
      classesLabel: "sınıf",
      page: "Sayfa",
      cancel: "İptal",
      createClass: "Sınıf Oluştur",
      errorLoading: "Sınıflar yüklenirken hata oluştu. Lütfen tekrar deneyin."
    },
    parents: {
      title: "Veli Yönetimi",
      subtitle: "Velileri bağımsız olarak oluşturun ve öğrencileri bağlayın.",
      created: "Veli başarıyla oluşturuldu",
      studentLinked: "Öğrenci başarıyla bağlandı",
      studentUnlinked: "Öğrenci bağlantısı başarıyla kaldırıldı",
      newParent: "Yeni Veli",
      firstName: "Ad",
      firstNamePlaceholder: "Örn: Ahmet",
      lastName: "Soyad",
      lastNamePlaceholder: "Örn: Yılmaz",
      email: "E-posta",
      emailPlaceholder: "ahmet@ornek.com",
      phone: "Telefon",
      phonePlaceholder: "+258...",
      manage: "Yönet:",
      linkedStudents: "Bağlı Öğrenciler",
      searchStudentPlaceholder: "İsme göre öğrenci ara...",
      noParentsFound: "Veli bulunamadı.",
      noPhone: "Telefon yok",
      parent: "Veli",
      studentsCount: "Öğrenci",
      manageLinks: "Bağlantıları Yönet",
      create: "Oluştur",
      loading: "Yükleniyor...",
      noLinkedStudents: "Bağlı öğrenci yok.",
      addNewLink: "Yeni Bağlantı Ekle",
      searching: "Aranıyor...",
      noStudentFound: "Öğrenci bulunamadı.",
      noClass: "Sınıf yok"
    },
    settings: {
      title: "Ayarlar",
      subtitle: "Okul ve sistem ayarlarını yönetin",
      schoolLogoAlt: "Okul Logosu",
      uploading: "Yükleniyor...",
      uploadLogo: "Logo Yükle",
      logoHint: "PNG, JPG 2MB'a kadar",
      schoolName: "Okul Adı",
      schoolCode: "Okul Kodu",
      schoolType: "Okul Türü",
      principal: "Müdür",
      emailLabel: "E-posta",
      emailPlaceholder: "Okul e-postası",
      phoneLabel: "Telefon",
      phonePlaceholder: "Okul telefonu",
      address: "Adres",
      city: "Şehir",
      province: "İl",
      website: "Web Sitesi",
      websitePlaceholder: "Okul web sitesi",
      primary: "İlkokul",
      primaryComplete: "Tam İlkokul",
      secondary: "Ortaokul",
      secondaryComplete: "Tam Ortaokul",
      manageUsers: "Yönetim paneline erişimi olan kullanıcıları yönetin",
      addUser: "Kullanıcı Ekle",
      userColumn: "Kullanıcı",
      roleColumn: "Rol",
      statusColumn: "Durum",
      lastAccessColumn: "Son Erişim",
      actionsColumn: "İşlemler",
      activeStatus: "Aktif",
      loadingUsers: "Yükleniyor...",
      noUsersFound: "Kullanıcı bulunamadı.",
      addUserTitle: "Kullanıcı Ekle",
      firstNameLabel: "Ad",
      firstNamePlaceholder: "Ad",
      lastNameLabel: "Soyad",
      lastNamePlaceholder: "Soyad",
      userEmailPlaceholder: "eposta@okul.edu.mz",
      userPhoneLabel: "Telefon",
      userPhonePlaceholder: "+258 84 123 4567",
      initialPassword: "İlk Şifre",
      roleLabel: "Rol",
      roleAdmin: "Yönetici",
      roleCoordinator: "Pedagojik Koordinatör",
      roleTeacher: "Öğretmen",
      roleAccountant: "Muhasebeci",
      roleLibrarian: "Kütüphaneci",
      cancel: "İptal",
      adding: "Ekleniyor...",
      add: "Ekle",
      logoUpdated: "Logo başarıyla güncellendi!",
      userAdded: "Kullanıcı başarıyla eklendi!",
      academicYearTitle: "Akademik Yıl",
      currentYear: "Mevcut Yıl",
      semesterTrimester: "Dönem/Yarıyıl",
      semester1: "1. Dönem",
      semester2: "2. Dönem",
      operatingHours: "Çalışma Saatleri",
      startTime: "Başlangıç",
      endTime: "Bitiş",
      classDuration: "Ders Süresi (dk)",
      breakInterval: "Teneffüs (dk)",
      gradingSystem: "Değerlendirme Sistemi",
      gradingScale: "Not Skalası",
      passingGrade: "Minimum Geçme Notu",
      attendanceSection: "Devam",
      attendanceThreshold: "Minimum Devam Eşiği (%)",
      attendanceHint: "Bu eşiğin altındaki öğrenciler işaretlenecektir",
      notificationsDesc: "Sistem bildirimlerini ne zaman ve nasıl alacağınızı yapılandırın",
      passwordPolicies: "Şifre Politikaları",
      minLength: "Minimum uzunluk",
      requireSpecialChars: "Özel karakter gerekli",
      requireNumbers: "Rakam gerekli",
      requireUpperLower: "Büyük ve küçük harf gerekli",
      sessionsAccess: "Oturumlar ve Erişim",
      sessionTimeout: "Oturum zaman aşımı (dakika)",
      twoFactorAuth: "İki faktörlü kimlik doğrulama",
      lockAfterFailedAttempts: "Başarısız denemelerden sonra kilitle",
      dangerZone: "Tehlikeli Bölge",
      dangerZoneDesc: "Bu işlemler geri alınamaz. Dikkatli olun.",
      resetAllPasswords: "Tüm Şifreleri Sıfırla",
      terminateAllSessions: "Tüm Oturumları Sonlandır",
      interfaceTheme: "Arayüz Teması",
      light: "Açık",
      dark: "Koyu",
      automatic: "Otomatik",
      primaryColor: "Ana Renk",
      language: "Dil",
      portugueseMoz: "Portekizce (Mozambik)",
      portuguesePt: "Portekizce (Portekiz)",
      english: "English",
      connectMozedu: "MozEdu'yu diğer hizmet ve sistemlerle bağlayın",
      sigeNacional: "Ulusal SIGE",
      sigeDesc: "Entegre Okul Yönetim Sistemi",
      mpesa: "M-Pesa",
      mpesaDesc: "Mobil ödemeler",
      googleWorkspace: "Google Workspace",
      googleDesc: "E-posta ve işbirliği",
      smsGateway: "SMS Gateway",
      smsDesc: "SMS mesajlaşma",
      backupCloud: "Bulut Yedekleme",
      backupDesc: "Otomatik bulut yedekleme",
      configure: "Yapılandır",
      connect: "Bağla",
      unsavedChanges: "Kaydedilmemiş değişiklikler",
      discard: "Vazgeç",
      saveChanges: "Değişiklikleri Kaydet",
      profileSection: "Okul Profili",
      countrySection: "Ülke ve Müfredat",
      usersSection: "Kullanıcılar",
      academicSection: "Akademik",
      gradingSection: "Not Sistemi",
      communicationsSection: "İletişim",
      notificationsSection: "Bildirimler",
      securitySection: "Güvenlik",
      appearanceSection: "Görünüm",
      integrationsSection: "Entegrasyonlar",
      loadingGrading: "Not sistemi ayarları yükleniyor...",
      attendanceAlerts: "E-posta ile Devamsızlık Uyarıları",
      attendanceAlertsDesc: "Öğrenciler devamsızlık yaptığında bildirim alın",
      gradesPublished: "Notlar Yayınlandı",
      gradesPublishedDesc: "Yeni notlar girildiğinde bildirim",
      schoolEvents: "Okul Etkinlikleri",
      schoolEventsDesc: "Etkinlikler ve aktiviteler hakkında uyarılar",
      urgentSms: "Acil SMS",
      urgentSmsDesc: "Acil iletişimler için SMS mesajları",
      pushNotifications: "Anlık Bildirimler",
      pushNotificationsDesc: "Uygulama içi bildirimler",
      weeklyReport: "Haftalık Rapor",
      weeklyReportDesc: "E-posta ile haftalık özet"
    },
    reports: {
      title: "Okul Analizleri ve Raporları",
      subtitle: "Okul performansı ve metriklerin genel görünümü",
      totalStudents: "Toplam Öğrenci",
      totalTeachers: "Toplam Öğretmen",
      avgAttendance: "Ort. Devam",
      avgGpa: "Ort. Not Ort.",
      recentActivity: "Son Aktivite",
      noActivity: "Son aktivite yok",
      financialOverview: "Finansal Genel Bakış",
      totalRevenue: "Toplam Gelir",
      pendingPayments: "Bekleyen Ödemeler"
    },
    curriculumTracks: {
      title: "Müfredat Yolları",
      subtitle: "Okulunuzun çoklu müfredat yollarını yönetin",
      addTrack: "Yol Ekle",
      totalTracks: "Toplam Yol",
      active: "Aktif",
      combined: "Birleşik",
      default: "Varsayılan",
      searchPlaceholder: "Yol ara...",
      nameColumn: "Ad",
      typeColumn: "Tür",
      scheduleColumn: "Program",
      statusColumn: "Durum",
      flagsColumn: "İşaretler",
      actionsColumn: "İşlemler",
      noTracksFound: "Müfredat yolu bulunamadı",
      edit: "Düzenle",
      delete: "Sil",
      editTrack: "Müfredat Yolunu Düzenle",
      createTrack: "Müfredat Yolu Oluştur",
      nameLabel: "Ad *",
      namePlaceholder: "Örn: Ulusal Yol",
      curriculumTypeLabel: "Müfredat Türü *",
      description: "Açıklama",
      descriptionPlaceholder: "İsteğe bağlı açıklama",
      combinedCurriculum: "Birleşik Müfredat",
      defaultTrack: "Varsayılan Yol",
      combinedSettings: "Birleşik Müfredat Ayarları",
      additionalCurriculums: "Ek Müfredatlar",
      ratio: "Oran (örn: 70-30)",
      scheduleConfig: "Program Yapılandırması",
      periodsPerDay: "Ders/Gün",
      periodMin: "Ders (dk)",
      breakMin: "Teneffüs (dk)",
      lunchMin: "Öğle (dk)",
      schoolDays: "Okul Günleri",
      cancel: "İptal",
      update: "Güncelle",
      create: "Oluştur",
      inactive: "Pasif",
      periods: "ders",
      daysWeek: "gün/hafta",
      trackUpdated: "Müfredat yolu güncellendi",
      trackCreated: "Müfredat yolu oluşturuldu",
      trackDeleted: "Müfredat yolu silindi",
      confirmDelete: "\"{name}\" silmek istediğinizden emin misiniz?",
      nameRequired: "Ad gereklidir",
      failedToSave: "Müfredat yolu kaydedilemedi",
      failedToDelete: "Yol silinemedi",
      failedToLoad: "Müfredat yolları yüklenemedi"
    }
  }
};

// Process each language file
['en', 'pt', 'fr', 'tr'].forEach(lang => {
  const filePath = path.join(messagesDir, lang + '.json');
  const json = JSON.parse(fs.readFileSync(filePath, 'utf8'));
  
  // 1. Add unauthorized to common
  json.common.unauthorized = unauthorizedTranslations[lang];
  
  // 2. Update school namespace
  const schoolData = schoolTranslations[lang];
  
  // Add nav label keys
  json.school.classesNav = schoolData.classesNav;
  json.school.analyticsNav = schoolData.analyticsNav;
  json.school.reportsNav = schoolData.reportsNav;
  json.school.settingsNav = schoolData.settingsNav;
  json.school.curriculumTracksNav = schoolData.curriculumTracksNav;
  json.school.parentsNav = schoolData.parentsNav;

  // Convert bare string keys to objects
  json.school.analytics = schoolData.analytics;
  json.school.classes = schoolData.classes;
  json.school.reports = schoolData.reports;
  json.school.settings = schoolData.settings;
  json.school.curriculumTracks = schoolData.curriculumTracks;
  json.school.parents = schoolData.parents;

  // Write back
  fs.writeFileSync(filePath, JSON.stringify(json, null, 2) + '\n', 'utf8');
  console.log(`Updated ${lang}.json`);
});

console.log('All language files updated successfully!');
